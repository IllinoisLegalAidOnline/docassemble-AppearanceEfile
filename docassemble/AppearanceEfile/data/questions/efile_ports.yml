---
include: 
  - docassemble.EFSPIntegration:codes_helper.yml
---
generic object: ALDocumentBundle
code: |
  x.filing_type
  x.filing_description
  x.reference_number
  x.tyler_filing_type 
  x.document_type
  x.motion_type
  x.filing_component
  x.filing_parties
  x.filing_action
  x.has_courtesy_copies
  x.optional_services.clear()
  x.optional_services.gathered = True
  x.as_pdf()
  x.completed =True
---
############# Overide some wording #########
generic object: DAObject
id: eserve
question: |
  Would you like to e-file this document, or serve to the desginated party?
fields:
  - Efile or serve?: x.filing_action
    choices:
      - Efile: efile
      - Efile and Serve: efile_and_serve
      - Serve: serve
---
id: document type
generic object: DAObject
question: |
  Was this case ordered to be sealed by the judge?
subquestion: |
  In some cases, the filings and orders are sealed by the court. This means the records are not visible to the public.
  If this happened in your case, you will have to upload a copy of the court order sealing the case.
fields:
  - Document type: x.document_type_code
    input type: radio
    code: |
      x.document_type_options
    default: ${ matching_tuple_option('non-confidential', x.document_type_options) }
---
generic object: DAObject
id: motion_type
question: |
  Motion Type
fields:
  - Motion Type: x.motion_type_code
    datatype: dropdown
    code: |
      x.motion_type_options
---
generic object: ALDocument
id: Parties resp for payment
question: |
  Parties responsible for payment
fields: 
  - Parties for payment: x.existing_parties_payment_dict
    datatype: checkboxes
    code: |
      all_case_parties
---
question: |
  Are you paying for the Appearance filing with a Fee Waiver?
subquestion: |
  If you are paying for this appearance with a fee waiver, you can fill out and
  electronically file (e-file) both forms at the same time in this program.
  This means you donâ€™t have to print out the forms. The court will communicate
  with you by email. You will have to provide your email to e-file your Appearance and Fee waiver.
fields:
  - Do you want to file a fee waiver?: user_wants_efile
    datatype: yesnoradio
---
id: eFile Login
question: |
  Log in to your e-filing account
subquestion: |
  To e-file with this program, you must have an e-filing account. Log in below or 
  <a href="${ interview_url(i="docassemble.EFSPIntegration:unauthenticated_interview.yml", reset=1, jurisdiction_id=jurisdiction_id) }" target="_blank">create a new account</a>.
fields:
  - email/username: my_username
  - password: my_password
    datatype: password
    hide if: user_forgot_password
  - I forgot my password: user_forgot_password
    datatype: yesno
---
############ Case Search ########
code: |
  def filter_fn(new_case):
    """Used inside case_search.yml to not include criminal cases"""
    return new_case.category not in ['76963', '76962', '76964', '76965']
---
generic object: EFCaseSearch
template: x.case_choice_label
content: |
  Which case do you want to file into?
---
generic object: EFCaseSearch
id: no cases found
question: |
  No cases found
subquestion: |
  We could not find the case you wanted to file into. The case might still exist, but
  % if x.cms_connection_issue:
  the court's electronic system isn't online.
  % else:
  it hasn't been entered into the court's sytem electronically.
  % endif

  % if x.can_file_non_indexed_case:
  You will have to provide all of the information about the case.
  % else:
  You will have to print out and file your paper forms.
  % endif
continue button field: x.warn_no_results
---
############ Payments Stuff ############
reconsider:
  - tyler_payment_account_options
id: payment account
question: |
  Payment Account
subquestion: |
  Select an existing account below, or add a payment account
  using the 
  [Admin Interface](${ interview_url(i=user_info().package + ":admin_interview.yml", reset=1) }){:target="_blank"}
  
  Refresh this page when you have finished adding the account.
fields:
  - Payment Account: tyler_payment_id
    datatype: dropdown
    code: |
      tyler_payment_account_options
---